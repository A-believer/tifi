---
type Props = {
  page: number;
  numberOfPosts: number;
};

const { page, numberOfPosts } = Astro.props;
const postsPerPage = Number(import.meta.env.POSTS_PER_PAGE);
const hasPreviousPosts = page > 1;
const hasNextPosts = numberOfPosts > page * postsPerPage;
const totalPages = Math.ceil(numberOfPosts / postsPerPage);
---

<div class="flex justify-between">
  {hasPreviousPosts ? (
    <a
      href={`?page=${page - 1}`}
      class="bg-teal-900 text-white py-3 px-6 rounded-xl text-xl"
    >
      Previous
    </a>
  ) : (
    <div />
  )}

  <div class="flex space-x-4">
    {Array.from({ length: totalPages }, (_, index) => {
      const pageNumber = index + 1;
      return (
        <a
          href={`?page=${pageNumber}`}
          class={`${
            pageNumber === page
              ? 'bg-teal-900 text-white py-3 px-6 rounded-xl text-xl'
              : 'bg-gray-200 text-teal-900 py-3 px-6 rounded-xl text-xl'
          }`}
        >
          {pageNumber}
        </a>
      );
    })}
  </div>

  {hasNextPosts ? (
    <a
      href={`?page=${page + 1}`}
      class="bg-teal-900 text-white py-3 px-6 rounded-xl text-xl"
    >
      Next
    </a>
  ) : (
    <div />
  )}
</div>
